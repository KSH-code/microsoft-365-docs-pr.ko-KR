---
title: 악용 방지 완화 문제 해결
keywords: Exploit Protection, 완화, 문제 해결, 가져오기, 내보내기, 구성, emet, 변환, 변환, 배포, 설치
description: 모든 완화를 제거하고 Windows 보안 대신 가져오는 프로세스를 포함하여 사용자 원치 않는 완화를 처리하는 방법을 알아보습니다.
search.product: eADQiWindows 10XVcnh
ms.prod: m365-security
ms.mktglfcycl: manage
ms.sitesec: library
ms.pagetype: security
localization_priority: Normal
audience: ITPro
author: dansimp
ms.author: dansimp
ms.date: 08/09/2018
ms.reviewer: ''
manager: dansimp
ms.technology: mde
ms.openlocfilehash: 931d8b7b12534512e49ada74e9b8b4359910713d
ms.sourcegitcommit: 4fb1226d5875bf5b9b29252596855a6562cea9ae
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 06/08/2021
ms.locfileid: "52844181"
---
# <a name="troubleshoot-exploit-protection-mitigations"></a><span data-ttu-id="f9bd0-104">악용 방지 완화 문제 해결</span><span class="sxs-lookup"><span data-stu-id="f9bd0-104">Troubleshoot exploit protection mitigations</span></span>

[!INCLUDE [Microsoft 365 Defender rebranding](../../includes/microsoft-defender.md)]


<span data-ttu-id="f9bd0-105">**적용 대상:**</span><span class="sxs-lookup"><span data-stu-id="f9bd0-105">**Applies to:**</span></span>
- [<span data-ttu-id="f9bd0-106">엔드포인트용 Microsoft Defender</span><span class="sxs-lookup"><span data-stu-id="f9bd0-106">Microsoft Defender for Endpoint</span></span>](https://go.microsoft.com/fwlink/p/?linkid=2154037)
- [<span data-ttu-id="f9bd0-107">Microsoft 365 Defender</span><span class="sxs-lookup"><span data-stu-id="f9bd0-107">Microsoft 365 Defender</span></span>](https://go.microsoft.com/fwlink/?linkid=2118804)

> <span data-ttu-id="f9bd0-108">Endpoint용 Defender를 경험하고 싶나요?</span><span class="sxs-lookup"><span data-stu-id="f9bd0-108">Want to experience Defender for Endpoint?</span></span> [<span data-ttu-id="f9bd0-109">무료 평가판에 등록합니다.</span><span class="sxs-lookup"><span data-stu-id="f9bd0-109">Sign up for a free trial.</span></span>](https://www.microsoft.com/microsoft-365/windows/microsoft-defender-atp?ocid=docs-wdatp-pullalerts-abovefoldlink) 


<span data-ttu-id="f9bd0-110">악용 방지 완화 집합(구성)을 만들 때 구성 내보내기 및 가져오기 프로세스에서 원치 않는 모든 완화가 제거되지는 않을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f9bd0-110">When you create a set of exploit protection mitigations (known as a configuration), you might find that the configuration export and import process does not remove all unwanted mitigations.</span></span>

<span data-ttu-id="f9bd0-111">사용자 계정에서 원치 않는 완화를 수동으로 Windows 보안 다음 프로세스를 사용하여 모든 완화를 제거한 다음 대신 기준 구성 파일을 가져올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f9bd0-111">You can manually remove unwanted mitigations in Windows Security, or you can use the following process to remove all mitigations and then import a baseline configuration file instead.</span></span>

1. <span data-ttu-id="f9bd0-112">다음 PowerShell 스크립트를 사용하여 모든 프로세스 완화를 제거합니다.</span><span class="sxs-lookup"><span data-stu-id="f9bd0-112">Remove all process mitigations with this PowerShell script:</span></span>

    ```PowerShell
    # Check if Admin-Privileges are available
    function Test-IsAdmin {
        ([Security.Principal.WindowsPrincipal] [Security.Principal.WindowsIdentity]::GetCurrent()).IsInRole([Security.Principal.WindowsBuiltInRole] "Administrator")
    }

    # Delete ExploitGuard ProcessMitigations for a given key in the registry. If no other settings exist under the specified key,
    # the key is deleted as well
    function Remove-ProcessMitigations([Object] $Key, [string] $Name) {
        Try {
            if ($Key.GetValue("MitigationOptions")) {
                Write-Host "Removing MitigationOptions for:      " $Name
                Remove-ItemProperty -Path $Key.PSPath -Name "MitigationOptions" -ErrorAction Stop;
            }
            if ($Key.GetValue("MitigationAuditOptions")) {
                Write-Host "Removing MitigationAuditOptions for: " $Name
                Remove-ItemProperty -Path $Key.PSPath -Name "MitigationAuditOptions" -ErrorAction Stop;
            }

            # Remove the FilterFullPath value if there is nothing else
            if (($Key.SubKeyCount -eq 0) -and ($Key.ValueCount -eq 1) -and ($Key.GetValue("FilterFullPath"))) {
                Remove-ItemProperty -Path $Key.PSPath -Name "FilterFullPath" -ErrorAction Stop;
            }

            # If the key is empty now, delete it
            if (($Key.SubKeyCount -eq 0) -and ($Key.ValueCount -eq 0)) {
                Write-Host "Removing empty Entry:                " $Name
                Remove-Item -Path $Key.PSPath -ErrorAction Stop
            }
        }
        Catch {
            Write-Host "ERROR:" $_.Exception.Message "- at ($MitigationItemName)"
        }
    }

    # Delete all ExploitGuard ProcessMitigations
    function Remove-All-ProcessMitigations {
        if (!(Test-IsAdmin)) {
            throw "ERROR: No Administrator-Privileges detected!"; return
        }

        Get-ChildItem -Path "HKLM:\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options" | ForEach-Object {
            $MitigationItem = $_;
            $MitigationItemName = $MitigationItem.PSChildName

            Try {
                Remove-ProcessMitigations $MitigationItem $MitigationItemName

                # "UseFilter" indicate full path filters may be present
                if ($MitigationItem.GetValue("UseFilter")) {
                    Get-ChildItem -Path $MitigationItem.PSPath | ForEach-Object {
                        $FullPathItem = $_
                        if ($FullPathItem.GetValue("FilterFullPath")) {
                            $Name = $MitigationItemName + "-" + $FullPathItem.GetValue("FilterFullPath")
                            Write-Host "Removing FullPathEntry:              " $Name
                            Remove-ProcessMitigations $FullPathItem $Name
                        }

                        # If there are no subkeys now, we can delete the "UseFilter" value
                        if ($MitigationItem.SubKeyCount -eq 0) {
                            Remove-ItemProperty -Path $MitigationItem.PSPath -Name "UseFilter" -ErrorAction Stop
                        }
                    }
                }
                if (($MitigationItem.SubKeyCount -eq 0) -and ($MitigationItem.ValueCount -eq 0)) {
                    Write-Host "Removing empty Entry:                " $MitigationItemName
                    Remove-Item -Path $MitigationItem.PSPath -ErrorAction Stop
                }
            }
            Catch {
                Write-Host "ERROR:" $_.Exception.Message "- at ($MitigationItemName)"
            }
        }
    }

    # Delete all ExploitGuard System-wide Mitigations
    function Remove-All-SystemMitigations {

        if (!(Test-IsAdmin)) {
            throw "ERROR: No Administrator-Privileges detected!"; return
        }

        $Kernel = Get-Item -Path "HKLM:\SYSTEM\CurrentControlSet\Control\Session Manager\kernel"

        Try {
            if ($Kernel.GetValue("MitigationOptions"))
                { Write-Host "Removing System MitigationOptions"
                    Remove-ItemProperty -Path $Kernel.PSPath -Name "MitigationOptions" -ErrorAction Stop;
                }
            if ($Kernel.GetValue("MitigationAuditOptions"))
                { Write-Host "Removing System MitigationAuditOptions"
                    Remove-ItemProperty -Path $Kernel.PSPath -Name "MitigationAuditOptions" -ErrorAction Stop;
                }
        } Catch {
            Write-Host "ERROR:" $_.Exception.Message "- System"
        }
    }

    Remove-All-ProcessMitigations
    Remove-All-SystemMitigations
    ```

2. <span data-ttu-id="f9bd0-113">Exploit Protection 구성 가져오기, 내보내기 및 배포에 설명된 다음과 같은 기본 완화를 사용하여 XML 구성 파일을 만들고 가져올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f9bd0-113">Create and import an XML configuration file with the following default mitigations, as described in Import, export, and deploy Exploit Protection configurations:</span></span>

    ```xml
     <?xml version="1.0" encoding="UTF-8"?>
     <root>
        <SystemConfig/>
        <AppConfig Executable="ExtExport.exe">
           <ASLR OverrideForceRelocateImages="false" ForceRelocateImages="false" Enable="true"/>
        </AppConfig>
        <AppConfig Executable="ie4uinit.exe">
          <ASLR OverrideForceRelocateImages="false" ForceRelocateImages="false" Enable="true"/>
        </AppConfig>
        <AppConfig Executable="ieinstal.exe">
       <ASLR OverrideForceRelocateImages="false" ForceRelocateImages="false" Enable="true"/>
        </AppConfig>
        <AppConfig Executable="ielowutil.exe">
          <ASLR OverrideForceRelocateImages="false" ForceRelocateImages="false" Enable="true"/>
        </AppConfig>
       <AppConfig Executable="ieUnatt.exe">
          <ASLR OverrideForceRelocateImages="false" ForceRelocateImages="false" Enable="true"/>
        </AppConfig>
       <AppConfig Executable="iexplore.exe">
          <ASLR OverrideForceRelocateImages="false" ForceRelocateImages="false" Enable="true"/>
        </AppConfig>
       <AppConfig Executable="mscorsvw.exe">
           <ExtensionPoints OverrideExtensionPoint="false" DisableExtensionPoints="true"/>
        </AppConfig>
        <AppConfig Executable="msfeedssync.exe">
           <ASLR OverrideForceRelocateImages="false" ForceRelocateImages="false" Enable="true"/>
        </AppConfig>
        <AppConfig Executable="mshta.exe">
           <ASLR OverrideForceRelocateImages="false" ForceRelocateImages="false" Enable="true"/>
        </AppConfig>
        <AppConfig Executable="ngen.exe">
           <ExtensionPoints OverrideExtensionPoint="false" DisableExtensionPoints="true"/>
        </AppConfig>
        <AppConfig Executable="ngentask.exe">
           <ExtensionPoints OverrideExtensionPoint="false" DisableExtensionPoints="true"/>
        </AppConfig>
        <AppConfig Executable="PresentationHost.exe">
           <DEP Enable="true" OverrideDEP="false" EmulateAtlThunks="false"/>
           <ASLR OverrideForceRelocateImages="false" ForceRelocateImages="false" Enable="true" OverrideBottomUp="false" HighEntropy="true" BottomUp="true"/>
           <SEHOP Enable="true" OverrideSEHOP="false" TelemetryOnly="false"/>
           <Heap OverrideHeap="false" TerminateOnError="true"/>
        </AppConfig>
        <AppConfig Executable="PrintDialog.exe">
           <ExtensionPoints OverrideExtensionPoint="false" DisableExtensionPoints="true"/>
        </AppConfig>
        <AppConfig Executable="PrintIsolationHost.exe"/>
        <AppConfig Executable="runtimebroker.exe">
           <ExtensionPoints OverrideExtensionPoint="false" DisableExtensionPoints="true"/>
        </AppConfig>
            <AppConfig Executable="splwow64.exe"/>
        <AppConfig Executable="spoolsv.exe"/>
        <AppConfig Executable="svchost.exe"/>
        <AppConfig Executable="SystemSettings.exe">
           <ExtensionPoints OverrideExtensionPoint="false" DisableExtensionPoints="true"/>
        </AppConfig>
    </root>
    ```

<span data-ttu-id="f9bd0-114">아직 다운로드하지 않은 경우 기본 Windows 보안 다운로드하여 Exploit Protection [](/windows/device-security/windows-security-baselines) 사용자 지정을 완료하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="f9bd0-114">If you haven’t already, it's a good idea to download and use the [Windows Security Baselines](/windows/device-security/windows-security-baselines) to complete your Exploit protection customization.</span></span>

## <a name="related-topics"></a><span data-ttu-id="f9bd0-115">관련 항목</span><span class="sxs-lookup"><span data-stu-id="f9bd0-115">Related topics</span></span>

* [<span data-ttu-id="f9bd0-116">악용으로부터 장치 보호</span><span class="sxs-lookup"><span data-stu-id="f9bd0-116">Protect devices from exploits</span></span>](exploit-protection.md)
* [<span data-ttu-id="f9bd0-117">Exploit Protection 평가</span><span class="sxs-lookup"><span data-stu-id="f9bd0-117">Evaluate exploit protection</span></span>](evaluate-exploit-protection.md)
* [<span data-ttu-id="f9bd0-118">악용 방지 사용</span><span class="sxs-lookup"><span data-stu-id="f9bd0-118">Enable exploit protection</span></span>](enable-exploit-protection.md)
* [<span data-ttu-id="f9bd0-119">Exploit Protection 완화 구성 및 감사</span><span class="sxs-lookup"><span data-stu-id="f9bd0-119">Configure and audit exploit protection mitigations</span></span>](customize-exploit-protection.md)
* [<span data-ttu-id="f9bd0-120">악용 보호 구성 가져오기, 내보내기 및 배포하기</span><span class="sxs-lookup"><span data-stu-id="f9bd0-120">Import, export, and deploy exploit protection configurations</span></span>](import-export-exploit-protection-emet-xml.md)
