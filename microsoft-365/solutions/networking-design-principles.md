---
title: 네트워킹 업(클라우드로) - 설계자 한 명의 관점
description: 가장 일반적인 문제를 방지하여 클라우드 연결에 맞게 네트워크를 최적화하는 방법을 학습합니다.
ms.author: bcarter
author: brendacarter
manager: bcarter
ms.audience: ITPro
ms.topic: article
ms.prod: microsoft-365-enterprise
localization_priority: Normal
ms.collection:
- M365-identity-device-management
- M365-security-compliance
ms.custom: ''
f1.keywords: NOCSH
ms.openlocfilehash: 175903949b639740ad00b29013d5748b99bdb2de
ms.sourcegitcommit: ddfb4f3e34deb733e8625e845e4dfd1fcc066ceb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 01/06/2021
ms.locfileid: "49771850"
---
# <a name="networking-up-to-the-cloudone-architects-viewpoint"></a>네트워킹 업(클라우드로) - 설계자 한 명의 관점

이 문서에서는 Microsoft의 Security & 준수 설계자인 [Ed Fisher가](https://www.linkedin.com/in/edfisher/)가장 일반적인 문제를 방지하여 클라우드 연결에 맞게 네트워크를 최적화하는 방법에 대해 설명했습니다. 

## <a name="about-the-author"></a>만든 이 정보

![Ed Fisher 사진](../media/solutions-architecture-center/ed-fisher-networking.jpg) 

현재 동남 지역의 보안 및 규정 준수에 중점을 두는 기술 전문가 & 있습니다. 지난 10년 동안 Office 365로 이동하는 고객과 함께 일해 왔습니다. 전 세계에 수백만 명의 사용자가 배포되어 있는 정부 기관 및 기업에 소수의 위치와 함께 소규모 상점을 운영하고 있으며, 그 사이에는 수만 명의 사용자, 전 세계 여러 위치에 여러 위치, 높은 수준의 보안 요구 사항 및 다양한 규정 준수 요구 사항이 있는 많은 고객이 있습니다. 수백 명의 기업과 수백만 명의 사용자가 클라우드로 안전하고 이동하는 데 도움을 주었다.

지난 25년 동안 보안, 인프라 및 네트워크 엔지니어링을 포함하는 배경을 들이고, Microsoft에 가입하기 전에 두 이전 고용주를 Office 365로 이동한 배경을 통해 이 표에 많은 시간을 의례해 왔습니다. 두 고객이 동일하지는 못하고, 대부분 유사한 요구가 있으며, SaaS 또는 PaaS 플랫폼과 같은 표준화된 서비스를 사용하는 경우 가장 좋은 방법은 같을 수 있습니다.

## <a name="its-not-the-networkits-how-youre-misusing-it"></a>네트워크가 아니며, 사용하는 방식이 잘못됩니다!

얼마나 많은 수가 발생하든, 창의적인 보안  팀과 네트워킹 팀이 Microsoft 클라우드 서비스에 연결해야 하는 방식에 대해 어떻게 생각할지 의아해하지 않을 것입니다. 항상 일부 보안 정책, 규정 준수 표준 또는 더 나은 방식으로 수행하려는 작업 또는 더 나은 방법, 더 쉽고, 비용  효율적인 방법 및 더 효율적인 방법에 대한 대화에 참여하지 않고 사용하려는 방법이 있습니다.

이런 종류의 일이 내게 에스컬레이터되는 경우 일반적으로 과제를 해결하고 그 방법과 이유에 대해 진행하고 필요한 위치로 가고자 합니다. 하지만 완전히 솔직히 말한 경우, 가끔 어떤 작업을 하게 하려는 경우를 공유하고, 최종적으로는 작동하지 않는다고 말했기 때문에 다시 돌아와야 합니다. 가끔 이 작업을 하고 싶을 수도 있지만 *그렇지는 않습니다.* 이 게시물에 포함할 모든 작업을 설명하려고 합니다. 조직에서 Microsoft 클라우드 서비스를 사용하려는 경우 역할에 관계없이 다음에 도움이 될 수 있는 몇 가지 문제가 있습니다.

## <a name="guiding-principles"></a>Guiding principles

여기서 수행하고 있는 작업을 몇 가지 기본 규칙으로 시작해보아야 합니다. 실제 보안을 유지하면서 최소 복잡성과 최대 성능을 보장하기 위해 클라우드 서비스에 안전하게 연결하는 방법을 논의하고 있습니다. 사용자나 고객이 모든 것을 위해 즐겨찾기 프록시 서버를 사용할 수 있는 것은 아니며 그에 대한 카운터는 없습니다.

- **그렇다고** 해서 Jurassic Park 영화 "...에서 Ian Malcolm을 패러다임으로 말하기를 원하지는 않습니다. 예, 예, 하지만 보안 팀이 너무 잘 몰라야 한다고 생각하지 않았을 수도 있습니다."
- **보안이 복잡성을** 의미하지는 않습니다. 더 많은 비용 지출, 더 많은 디바이스를 통해 라우팅 또는 더 많은 단추 클릭으로 인해 보안이 더 안전하지 않습니다.
- **Office 365는** 인터넷을 통해 액세스되지만 Office 365와 인터넷은 동일하지 않습니다. Microsoft에서 관리하고 사용자에 의해 관리되는 SaaS 서비스입니다. 인터넷을 통해 방문하는 웹 사이트와 달리 실제로는 숨어 있는 정보를 볼 수 있으며, 목표를 충족할 수 있는 동안에는 다른 방식으로만 작업을 해야 할 수 있습니다.
- **초크포인트는** 불량하고 지역화된 중단점은 양호합니다. 모든 사용자는 항상 모든 사용자의 인터넷 트래픽을 일부 중앙 지점으로 되돌리려 합니다. 일반적으로 모니터링하고 정책을 적용할 수 있지만, 대부분의 경우 모든 위치에서 인터넷 액세스를 프로비전하는 것보다 저렴하거나 이러한 방식만 적용하기를 원합니다. 그러나 이러한 경과점은 정확히... 트래픽이 지체되는 지점입니다. 사용자가 인연 또는 스트리밍 Cat 비디오를 탐색하지 못하도록 하는 데는 아무런 문제가 없지만 업무상 중요한 비즈니스 응용 프로그램 트래픽을 같은 방식으로 처리하지 않도록 합니다.
- DNS가 만족스럽지 않은 **경우:** 최상의 디자인 네트워크는 다른 지역에 있는 서버에 대한 요청을 다시 실행하거나 DNS 확인 정보를 캐시하는 ISP의 DNS 서버 또는 기타 공용 DNS 서버를 사용하는 경우 불량 DNS에 의해 햄스트링될 수 있습니다.
- **지금까지** 이 작업을 한다고 해서 지금 이 작업을 어떻게 해야 하는 것은 아닙니다. 기술 변경이 지속적으로 발생하며 Office 365도 예외가 아닙니다. 프레미스 서비스 또는 웹 검색을 제어하기 위해 개발 및 배포된 보안 조치를 적용하면 동일한 수준의 보안 보증이 제공되지 않을 수 있으며 성능에 큰 부정적인 영향을 줄 수 있습니다.
- **Office 365는** 인터넷을 통해 액세스하기 위해 만들어지며, 간단히 말해 볼 수 있습니다. 사용자와 에지 간에 어떤 작업을 하려는지와 상관없이 트래픽은 네트워크에서 나간 후 그리고 네트워크에 연결되기 전에 인터넷을 통해 계속 진행됩니다. Azure ExpressRoute를 사용하여 네트워크에서 대기 시간에 민감한 트래픽을 직접 라우팅하는 경우에도 인터넷 연결이 절대적으로 필요합니다. 수락합니다. Overthink it.

## <a name="where-bad-choices-are-often-made"></a>잘못된 선택이 자주 있는 경우

보안 이름에 잘못된 결정을 내릴 수 있는 장소가 많지만 가장 자주 고객에게 발생하는 위치입니다. 많은 고객 대화에는 이러한 모든 것이 한 동시에 포함 됩니다.

### <a name="insufficient-resources-at-the-edge"></a>에지의 리소스 부족

녹색 필드 환경을 배포하는 고객은 매우 적고, 수년간 사용자의 작업 방식과 인터넷을 통해 어떤 경험을 하게 되었습니다. 고객에게 프록시 서버가 있는지 아니면 직접 액세스를 허용하고 단순히 NAT 아웃바운드 트래픽을 허용하는지 여부에 따라 고객은 수년 동안 이 작업을 수행해 왔습니다. 기존 내부 응용 프로그램을 클라우드로 이동할 때 에지에서 서비스를 시작하는 데 얼마나 많은지 고려하지 않습니다.

대역폭은 항상 우려되지만 NAT 장치에 증가된 부하를 처리할 수 있는 충분한 처리 자원이 부족할 수 있으며 연결을 조기 닫아 리소스를 확보할 수 있습니다. Office 365에 연결하는 대부분의 클라이언트 소프트웨어는 영구 연결을 기대하며 Office 365를 완전히 활용하는 사용자는 32개 이상의 동시 연결을 사용할 수 있습니다. NAT 장치가 앱을 미리 삭제하는 경우 해당 앱이 더 이상 없는 연결을 사용하려고 할 때 응답하지 않을 수 있습니다. 포기하고 새 연결을 설정하려고 할 때 네트워크 기어에 훨씬 더 많은 부하를 가합니다.

### <a name="localized-breakout"></a>지역화된 중단

이 목록의 다른 모든 항목은 네트워크에서 최대한 빨리 벗어날 수 있는 한 가지 방법을 제공합니다. 사용자의 트래픽을 중앙 시작 지점으로 되돌리면, 특히 해당 시작 지점이 사용자와 다른 지역에 있는 경우 불필요한 대기 시간이 발생하고 클라이언트 환경과 다운로드 속도에 모두 영향을 미치게 됩니다. Microsoft는 거의 모든 주요 ISP를 통해 구축된 모든 서비스 및 피어링에 대한 프런트 엔드를 통해  전 세계에 존재하고 있으므로 사용자의 트래픽을 로컬로 라우팅하면 최소 대기 시간으로 빠르게 네트워크에 연결됩니다.

### <a name="dns-resolution-traffic-should-follow-the-internet-egress-path"></a>DNS 확인 트래픽이 인터넷으로의 연결 경로를 따라야 합니다.

물론 클라이언트가 끝점을 찾으기 위해 DNS를 사용해야 합니다. Microsoft의 DNS 서버는 DNS 요청의 원본을 평가하여 요청 원본에 가장 가까운 인터넷 용어로 응답을 반환합니다. 이름 확인 요청이 사용자의 트래픽과 동일한 경로를 나가도록 DNS가 구성되어 있는지 확인한 후 로컬로 나가지만 다른 지역의 끝점에 대해 로컬로 나가는 것이 가장 까다롭습니다. 즉, 원격 데이터 센터의 DNS 서버로 전달하는 대신 로컬 DNS 서버가 "루트로 이동"하게 합니다. 또한 전 세계의 한 부분에서 결과를 캐시하고 전 세계 다른 부분의 요청에 서비스를 제공하는 공용 및 개인 DNS 서비스에 대해 유의해야 합니다.

### <a name="to-proxy-or-not-to-proxy-that-is-the-question"></a>프록시를 프록시로 설정하거나 프록시하지 않는 것이 문제입니다.

첫 번째로 고려해야 할 것 중 하나는 사용자의 연결을 Office 365에 프록시할지 여부입니다. 간단합니다. 프록시하지 않습니다. Office 365는 인터넷을 통해 액세스되지만 인터넷은 액세스하지 않습니다. 핵심 서비스의 확장으로, 이와 같이 처리해야 합니다. DLP 또는 맬웨어 방지 또는 콘텐츠 검사와 같이 프록시가 할 수 있는 모든 작업을 서비스에서 이미 사용할 수 있으며 TLS로 암호화된 연결을 크랙할 필요 없이 대규모로 사용할 수 있습니다. 그렇지만 실제로 제어할 수 없는 트래픽을 프록시로 프록시하려는 경우 의 지침과 트래픽 범주에 [https://aka.ms/pnc](https://aka.ms/pnc) [https://aka.ms/ipaddrs](https://aka.ms/ipaddrs) 주의하세요. Office 365에 대한 세 가지 트래픽 범주가 있습니다. 최적화 및 허용은 실제로 프록시를 직접 이동하고 무시해야 합니다. 기본값은 Proxied일 수 있습니다. 세부 정보는 다음에 설명됩니다. 읽기

프록시 사용을 고민하는 대부분의 고객은 실제로 수행하고 있는 작업을 볼 때 클라이언트가 프록시에 HTTP CONNECT 요청을 할 때 프록시는 이제 비용이 많이 드는 추가 라우터에 불과하다는 것을 알고 있습니다. MAPI 및 RTC와 같은 사용 프로토콜은 웹 프로시저가 이해하는 프로토콜도 아니기 때문에 TLS 크래킹이 있는 경우에도 추가 보안이 강화되지 않습니다. 추가 *대기* 시간이 길어지고 있습니다. Microsoft 365 트래픽에 대한 최적화, 허용 및 기본 범주를 포함하여 자세한 내용은 이 정보를 [https://aka.ms/pnc](https://aka.ms/pnc) 참조합니다.

마지막으로, 프록시에 대한 전반적인 영향과 해당 영향을 처리하기 위해 해당 응답을 고려합니다. 프록시를 통해 연결되는 연결이 증가하고 있으므로 너무 많은 트래픽을 버퍼링하지 않을 수 있도록 TCP 배율 배율을 낮출 수 있습니다. 프로시전이 너무 과부하가 하여 배율 계수 0을 사용 중이던 고객을 본 적이 있습니다. Scale Factor는 지수 값으로, 8을 사용하겠기 때문에 배율 계수 값의 각 감소는 성능에 큰 부정적인 영향을 미치게 됩니다.

TLS 검사는 SECURITY! 그렇지만 실제로는 그렇지 않습니다! 많은 고객이 이들을 사용하여 모든 트래픽을 조사하기를 원하며, 이는 TLS "중단 및 조사"를 의미합니다. HTTPS(개인 정보 보호 문제)를 통해 액세스한 웹 사이트에 대해 프록시가 수백밀리초 동안 10개 또는 20개의 동시 스트림에 대해 이 작업을 해야 할 수 있습니다. 다운로드가 많거나 비디오가 관련될 수 있는 경우 이러한 연결 중 하나 이상이 더 오래 지속될 수 있지만 전체적으로 대부분의 연결은 매우 빠르게 설정, 전송 및 닫습니다. 중단 및 조사를 수행하면 프록시가 작업의 두 배를 수행해야 합니다. 또한 클라이언트에서 프록시로의 각 연결에 대해 프록시는 끝점에 대한 별도의 연결을 다시 설정해야 합니다. 따라서 1이 2가 2가 2가 4가 지고 32가 64가 됩니다. 어디로 가고 있나요? 일반적인 웹 검색의 경우 프록시 솔루션의 크기를 정해 두면 됩니다. 그러나 Office 365에 대한 클라이언트 연결에 대해 동일한 작업을 시도할 때 수명이 긴 동시 연결 수는 크기에 따라 크기가 더 클 수 있습니다.

### <a name="streaming-isnt-important-except-that-it-is"></a>스트리밍은 중요하지 않습니다. 

Office 365에서 UDP를 사용하는 서비스는 Skype(곧 사용 중지될 예정)와 Microsoft Teams뿐입니다. Teams는 오디오, 비디오 및 프레젠테이션 공유를 비롯한 스트리밍 트래픽에 UDP를 사용 합니다. 스트리밍 트래픽은 음성, 비디오 및 데크를 발표하거나 데모를 수행하는 온라인 모임과 같은 라이브 트래픽입니다. 패킷이 삭제되거나 순서가 떨어질 경우 사용자가 사실상 UDP를 사용하며 스트림은 계속 진행할 수 있기 때문에 UDP를 사용하게 됩니다.

클라이언트에서 서비스로의 아웃바운드 UDP 트래픽을 허용하지 않는 경우 TCP를 사용할 수 있습니다. 그러나 TCP 패킷이 삭제되면  RTO(Retransmission Timeout)가 만료되고 누락된 패킷을 다시 전송할 수 있을 때까지 모든 것이 중지됩니다. 패킷이 주문이 없는 경우 다른 패킷이 도착할 때까지 모든 것이 중지되어 순서대로 다시 재구성될 수 있습니다. 두 경우 모두 오디오에서 인식할 수 있는 글리치(최대 헤드룸 기억) 및 비디오(어떤 것을 클릭했습니까? )를 통해 성능이 나쁘고 사용자 환경이 나쁘게 발생할 수 있습니다. 그리고 위의 Proxies에 대해 떠올리면 어떻게 하나요? Teams 클라이언트가 프록시를 강제로 사용할 경우 TCP를 강제로 사용하게 됩니다. 이제 성능에 대한 부정적인 영향을 두 번 발생하게 됩니다.

### <a name="split-tunneling-may-seem-scary"></a>분할 터널링이 까다로워 보일 수 있습니다.

그렇지만 그렇지 않습니다. Office 365에 대한 모든 연결은 TLS를 통해 진행됩니다. 지금까지 TLS 1.2를 제공해오고 있으며, 레거시 클라이언트가 계속 사용하며 이는 위험하기 때문에 곧 이전 버전을 사용하지 않습니다.

TLS 연결 또는 그 중 32개가 VPN을 통해 이동한 다음 서비스로 이동해도 보안이 추가되지 않습니다. 대기 시간을 추가하고 전반적인 처리 시간을 줄입니다. 일부 VPN 솔루션에서는 UDP가 TCP를 통과하게 하여 스트리밍 트래픽에 다시 부정적인 영향을 미치게 됩니다. 또한 TLS 검사를 수행하지 않는 한 단점은 없습니다. 대부분의 인력이 원격이기 때문에 고객들 사이에서 매우 일반적인 테마는 모든 사용자가 최적화 범주 [Office 365](https://docs.microsoft.com/microsoft-365/enterprise/microsoft-365-network-connectivity-principles#new-office-365-endpoint-categories)끝점에 액세스하기 위해 분할 터널링을 구성하는 대신 VPN을 사용하여 연결하게 하여 상당한 대역폭 및 성능 영향을 보고 있는 것입니다.

분할 터널링을 쉽게 수정하고 해결해야 합니다. 자세한 내용은 VPN 분할 터널링을 사용하여 원격 사용자에 대한 [Office 365 연결 최적화를 검토해야 합니다.](https://docs.microsoft.com/microsoft-365/enterprise/microsoft-365-vpn-split-tunnel)

## <a name="the-sins-of-the-past"></a>과거의 죄

잘못된 선택의 이유는 (1) 서비스가 작동하는 방법을 모르는 경우, (2) 클라우드를 도입하기 전에 작성된 회사 정책을 준수하려고 시도하는 경우, (3) 목표를 달성할 수 있는 방법이 두 가지 이상이 없다고 쉽게 확신할 수 없는 보안 팀의 조합에서 비로소 올 수 있습니다. 위의 링크와 아래 링크가 첫 번째에 도움이 될 것입니다. 두 번째를 지난 후원하려면 임원진 후원이 요구될 수 있습니다. 방법 대신 보안 정책의 목표를 해결하면 세 번째 문제를 해결할 수 있습니다. 콘텐츠 중재에 대한 조건부 액세스, DLP에서 정보 보호, 끝점 유효성 검사, 제로 데이 위협에 대한 끝점 유효성 검사 등 모든 최종 목표를 Office 365에서 사용할 수 있는 것으로 달성할 수 있으며, 모든 최종 목표가 Office 365에서 사용할 수 있으며, 이 정책은 프레미스 네트워크 기어, 강제 VPN 터널 및 TLS 중단 및 조사에 종속되지 않고도 달성할 수 있습니다.

다른 경우 조직이 클라우드로 이동하기 전에 크기 조정 및 구매한 하드웨어는 단순히 새 트래픽 패턴 및 부하를 처리하기 위해 확장할 수 없습니다. 단일 시작 지점을 통해 모든 트래픽을 라우팅하고/또는 프록시해야 하는 경우 그에 따라 네트워크 장비 및 대역폭을 업그레이드할 준비를 합니다. 더 많은 사용자가 온보드할 때 환경이 느리게 느리게 저하되지는 않습니다. 두 가지 모두에서 사용률을 주의 깊게 모니터링합니다. 팁 포인트에 도달할 때까지 모든 것이 괜찮습니다. 그러면 모든 사람이 겪습니다.

## <a name="exceptions-to-the-rules"></a>규칙에 대한 예외

조직에 테넌트 제한이 필요한 경우 TLS 중단이 있는 프록시를 사용하여 프록시를 검사하여 프록시를 통해 일부 트래픽을 강제로 검사해야 하지만, 이를 통해 모든 트래픽을 강제할 필요는 없습니다. [](https://docs.microsoft.com/azure/active-directory/manage-apps/tenant-restrictions)  이는 모두 또는 아무 것도 아니기 때문에 프록시에서 수정해야 하는 일에 주의해야 합니다.

분할 터널링을 허용하지만 일반 웹 트래픽에 프록시도 사용하려면 PAC 파일이 직접 이동해야 하는 작업과 VPN 터널을 통과하는 트래픽에 대한 흥미로운 트래픽을 정의하는 방법을 정의하는지 확인하세요. 이를 보다 쉽게 관리할 수 있도록 샘플 PAC 파일을 [https://aka.ms/ipaddrs](https://aka.ms/ipaddrs) 제공합니다.

## <a name="conclusion"></a>결론

거의 모든 Fortune 500을 포함하여 수만 조직이 일상적으로 Office 365를 사용하여 중요 임무를 다하고 있습니다. 이러한 작업을 안전하게 하여 인터넷을 통해 이 작업을 합니다.

어떤 보안 목표가 실행 중이든, VPN 연결, 프록시 서버, TLS 중단 및 조사 또는 중앙 집중식 인터넷 전송을 요구하지 않는 방식으로 사용자의 트래픽을 네트워크에서 벗어날 수 있도록 하여 최상의 성능을 제공하는, 네트워크가 회사 본사인지, 원격 사무실인지에 상관없이 최상의 성능을 제공합니다. 또는 사용자가 집에서 작업하는 경우 이 지침은 Office 365 서비스가 구축된 방식과 안전하고 수행적인 사용자 환경을 보장하기 위한 것입니다.

## <a name="further-reading"></a>추가 읽기

[Office 365 네트워크 연결 원칙](https://docs.microsoft.com/microsoft-365/enterprise/microsoft-365-network-connectivity-principles)

[Office 365 URL 및 IP 주소 범위](https://docs.microsoft.com/microsoft-365/enterprise/urls-and-ip-address-ranges)

[Office 365 끝점 관리](https://docs.microsoft.com/microsoft-365/enterprise/managing-office-365-endpoints)

[Office 365 IP 주소 및 URL 웹 서비스](https://docs.microsoft.com/microsoft-365/enterprise/microsoft-365-ip-web-service)

[Office 365 네트워크 연결 평가](https://docs.microsoft.com/microsoft-365/enterprise/assessing-network-connectivity) 

[Office 365 네트워크 및 성능 조정](https://docs.microsoft.com/microsoft-365/enterprise/network-planning-and-performance)

[Office 365 네트워크 연결 평가](https://docs.microsoft.com/microsoft-365/enterprise/assessing-network-connectivity) 

[초기 계획 및 성능 기록을 사용하여 Office 365 성능 조정](https://docs.microsoft.com/microsoft-365/enterprise/performance-tuning-using-baselines-and-history)

[Office 365 성능 문제 해결 계획](https://docs.microsoft.com/microsoft-365/enterprise/performance-troubleshooting-plan)

[콘텐츠 배달 네트워크](https://docs.microsoft.com/microsoft-365/enterprise/content-delivery-networks)

[Microsoft 365 연결 테스트](https://connectivity.office.com/)

[Microsoft가 빠르고 안정적인 글로벌 네트워크를 구축하는 방법](https://azure.microsoft.com/blog/how-microsoft-builds-its-fast-and-reliable-global-network/)

[Office 365 네트워킹 블로그](https://techcommunity.microsoft.com/t5/office-365-networking/bd-p/Office365Networking)

[VPN 분할 터널링을 사용하는 원격 사용자를 위한 Office 365 연결](https://docs.microsoft.com/microsoft-365/enterprise/microsoft-365-vpn-split-tunnel)


