---
title: 클라우드에 대한 네트워킹 - 설계자 한 1명의 관점에서 볼 수 있습니다.
description: 가장 일반적인 문제를 방지하여 클라우드 연결에 맞게 네트워크를 최적화하는 방법을 학습합니다.
ms.author: bcarter
author: brendacarter
manager: bcarter
ms.audience: ITPro
ms.topic: article
ms.prod: microsoft-365-enterprise
ms.localizationpriority: medium
ms.collection:
- M365-identity-device-management
- M365-security-compliance
ms.custom: ''
f1.keywords: NOCSH
ms.openlocfilehash: 519f3035040f563a6f3663198be3952830cb21cb
ms.sourcegitcommit: d4b867e37bf741528ded7fb289e4f6847228d2c5
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2021
ms.locfileid: "60158949"
---
# <a name="networking-up-to-the-cloudone-architects-viewpoint"></a>클라우드에 대한 네트워킹 - 설계자 한 1명의 관점에서 볼 수 있습니다.

이 문서에서는 Microsoft의 Security & 준수 설계자인 [Ed Fisher가](https://www.linkedin.com/in/edfisher/)가장 일반적인 문제를 방지하여 클라우드 연결에 맞게 네트워크를 최적화하는 방법에 대해 설명하고 있습니다. 

## <a name="about-the-author"></a>만든 이 정보

![Ed Fisher 사진.](../media/solutions-architecture-center/ed-fisher-networking.jpg) 

현재 소매 및 소비자 제품 팀의 수석 기술 전문가로, 보안 및 규정 준수에 & 있습니다. 지난 10년 동안 고객사로 이동한 Office 365 작업했습니다. 전 세계에 수백만 명의 사용자가 배포된 정부 기관 및 기업에 소수의 장소와 함께 소수의 장소와 함께 일해 보며, 그 사이에는 수만 명의 사용자, 전 세계 다양한 위치에 있는 여러 위치, 높은 수준의 보안 요구 사항 및 다양한 규정 준수 요구 사항과 함께 많은 고객을 유치했습니다. 수백 대기업과 수백만 명의 사용자가 안전하게 클라우드로 이동하는 데 도움을 주었다.

지난 25년 동안 보안, 인프라 및 네트워크 엔지니어링을 포함하는 배경을 떠올리며, Microsoft에 가입하기 전에 이전 고용주 두 2명을 Office 365 이동한 배경을 통해 표에 많은 시간을 투자해 왔습니다. 두 고객이 동일하지는 않습니다. 대부분의 요구는 비슷하며, SaaS 또는 PaaS 플랫폼과 같은 표준화된 서비스를 사용하는 경우 가장 좋은 접근 방식은 같을 수 있습니다.

## <a name="its-not-the-network--its-how-youre-misusing-it"></a>네트워크가 아니며( 잘못 사용) 방법입니다!

얼마나 많은 경우든 창의적인 보안 팀과 네트워킹  팀이 Microsoft 클라우드 서비스에 연결해야 하는 방식에 대해 어떻게 생각할지 의아해하지 않을 것입니다. 항상 일부 보안 정책, 규정 준수 표준 또는 더 나은 방식으로 사용하려는 보안 정책, 규정 준수 표준 또는 더 나은  방식으로 수행하려는 작업 또는 더 나은 방법, 더 쉽고, 비용 효율적인 방법 및 더 효율적인 방법을 대화에 참여할 필요 없이 사용할 수 있습니다. 

이런 종류의 일이 내게 에스컬레이터되는 경우 일반적으로 과제를 해결하고 방법과 이유에 대해 진행하고 필요한 위치로 가고자 합니다. 하지만 완전히 솔직히 말하고 있는 경우 경우에 따라 이들에게 어떤 작업을 하게 하고, 마지막으로 작동하지 않는다고 했기 때문에 말하기를 원할 때 공유해야 합니다. 경우에 따라 이 작업을 하고 싶을 수 있지만 은(는) *그렇지 않습니다.* 이 게시물에 포함할 모든 작업을 설명하려고 합니다. 조직에서 Microsoft 클라우드 서비스를 사용하려는 경우 역할에 관계없이 도움이 될 수 있는 몇 가지 사안이 있습니다.

## <a name="guiding-principles"></a>Guiding principles

여기서 수행하고 있는 작업을 몇 가지 기본 규칙으로 시작해보아야 합니다. 실제 보안을 유지하면서 최소 복잡성과 최대 성능을 보장하기 위해 클라우드 서비스에 안전하게 연결하는 방법을 논의하고 있습니다. 다음에는 사용자나 고객이라도 모든 것을 위해 즐겨찾기 프록시 서버를 사용할 수 없습니다.

- **그렇게 할** 수 있습니다. 또는 Jurassic Park 영화 "...의 Ian Malcolm을 패러다임으로 말하기를 의미하지는 않습니다. 예. 그렇지만 보안 팀이 그렇게 몰라야 할지 여부를 생각하지 못했습니다."
- **보안이 복잡함을** 의미하는 것은 아니며, 더 많은 돈을 소비하거나, 더 많은 장치를 라우팅하거나, 더 많은 단추를 클릭하기만 해서 더 안전하지는 않습니다.
- **Office 365** 인터넷을 통해 액세스: 그러나 인터넷과 Office 365 것은 아닙니다. Microsoft에서 관리하고 관리하는 SaaS 서비스입니다. 인터넷을 통해 방문하는 웹 사이트와 달리 실제로는 숨은 고지 사항을 볼 수 있으며, 목표를 충족할 수 있는 동안에는 다른 방식으로만 작업을 해야 할 수 있습니다.
- **초크포인트는** 불량하고 지역화된 중단점이 양호합니다. 모든 사용자는 항상 모든 사용자의 인터넷 트래픽을 일부 중앙 지점으로 되돌리려 합니다. 따라서 일반적으로는 모니터링하고 정책을 적용할 수 있지만, 모든 위치에서 인터넷 액세스를 프로비전하는 것보다 저렴한 것이거나 그 방법일 수 있습니다. 그러나 이러한 경과점은 정확히... 트래픽이 지체되는 지점입니다. 사용자가 인연 또는 스트리밍 Cat 비디오를 탐색하지 못하도록 하는 데 아무런 문제가 없지만 업무상 중요한 비즈니스 응용 프로그램 트래픽을 같은 방식으로 처리하지는 않습니다.
- DNS가 만족스럽지 않은 **경우:** DNS 확인 정보를 캐시하는 ISP의 DNS 서버 또는 기타 공용 DNS 서버를 사용하여 요청을 재발하는 경우든, 최상의 디자인 네트워크는 불량 DNS에 의해 햄스트링될 수 있습니다.
- **지금까지 사용했다고** 해서 지금 이 작업을 어떻게 해야 하는 것은 아닙니다. 기술 변경은 지속적으로 Office 365 예외는 아닙니다. 사내 서비스에 대해 개발 및 배포되고 배포된 보안 조치를 적용하거나 웹 검색을 제어하는 방식은 동일한 수준의 보안 보장을 제공하지 않을 것이고 성능에 큰 부정적인 영향을 줄 수 있습니다.
- **Office 365** 인터넷을 통해 액세스할 수 있도록 만들어지며, 간단히 말해서 볼 수 있습니다. 사용자와 에지 간에 어떤 작업을 하려는지와 상관없이 트래픽은 네트워크에서 나간 후 그리고 네트워크에 연결되기 전에 인터넷을 통해 계속 진행됩니다. Azure ExpressRoute를 사용하여 네트워크에서 당사로 대기 시간이 중요한 트래픽을 직접 라우팅하는 경우에도 인터넷 연결이 절대적으로 필요합니다. 수락합니다. 오버사이킹하지 않습니다.

## <a name="where-bad-choices-are-often-made"></a>잘못된 선택이 자주 있는 경우

보안 이름에 잘못된 결정을 내릴 수 있는 장소가 많지만, 이러한 위치는 고객과 가장 자주 만나게 됩니다. 많은 고객 대화에는 이러한 모든 것이 한에 포함 됩니다.

### <a name="insufficient-resources-at-the-edge"></a>에지의 리소스 부족

그린필드 환경을 배포하는 고객은 거의 없습니다. 그리고 몇 년 동안 사용자의 작업 방식과 인터넷을 통해 어떤 경험을 하게 됐는가? 고객이 프록시 서버를 사용 중이든 직접 액세스를 허용하고 단순히 NAT 아웃바운드 트래픽을 허용하는지 여부에 따라, 수년 동안 이 작업을 수행해 왔습니다. 기존 내부 응용 프로그램을 클라우드로 이동하는 동안 에지에서 준비를 시작하게 될 정도를 고려하지 않습니다.

대역폭은 항상 우려되지만 NAT 장치에 증가된 부하를 처리할 수 있는 충분한 처리력은 부족할 수 있으며 리소스를 확보하기 위해 연결을 조기 닫기 시작할 수 있습니다. 클라이언트에 연결하는 대부분의 클라이언트 Office 365 영구적인 연결이 예상되고 사용자가 이 기능을 Office 365 32개 이상의 동시 연결이 있을 수 있습니다. NAT 디바이스에서 해당 장치를 조기 삭제하는 경우 해당 앱은 더 이상 없는 연결을 사용하려고 할 때 응답하지 않을 수 있습니다. 사용자가 연결을 포기하고 새 연결을 설정하려고 할 때 네트워크 기어에 훨씬 더 많은 부하를 가합니다.

### <a name="localized-breakout"></a>지역화된 중단

이 목록의 다른 모든 항목은 네트워크에서 최대한 빨리 벗어날 수 있는 한 가지로 내려집니다. 특히 이 전송 지점이 사용자와 다른 지역에 있는 경우 사용자의 트래픽을 중앙 전송 지점으로 백하우는 불필요한 대기 시간이 발생하고 클라이언트 환경과 다운로드 속도에 모두 영향을 미치게 됩니다. Microsoft는 모든 서비스 및 피어링에 대한 프런트 엔드가 거의 모든 주요 ISP를 통해 설정되는 전  세계에 존재하고 있으므로 사용자의 트래픽을 로컬로 라우팅하면 최소 대기 시간으로 신속하게 네트워크에 연결됩니다.

### <a name="dns-resolution-traffic-should-follow-the-internet-egress-path"></a>DNS 확인 트래픽이 인터넷을 통해 연결 경로를 따라야 합니다.

물론 클라이언트가 끝점을 찾으면 DNS를 사용해야 합니다. Microsoft의 DNS 서버는 DNS 요청의 원본을 평가하여 요청 원본에 가장 가까운 인터넷 용어로 응답을 반환합니다. 이름 확인 요청이 사용자의 트래픽과 동일한 경로에서 나가도록 DNS가 구성되어 있는지 확인한 후 로컬로 나가지만 다른 지역의 끝점에 로컬로 나가지 않습니다. 즉, 로컬 DNS 서버가 원격 데이터 센터의 DNS 서버로 전달하는 대신 "루트로 이동"할 수 있습니다. 또한 전 세계의 한 부분에서 결과를 캐시하고 전 세계의 다른 부분의 요청에 서비스를 제공하는 공용 및 개인 DNS 서비스에 대해 조사합니다.

### <a name="to-proxy-or-not-to-proxy-that-is-the-question"></a>프록시를 프록시로 설정하거나 프록시로 설정하지 않는 것이 문제입니다.

가장 먼저 고려해야 할 것 중 하나는 사용자 연결을 프록시할지 여부입니다Office 365. 쉽게 사용할 수 있습니다. 프록시를 하지 않습니다. Office 365 인터넷을 통해 액세스되지만 인터넷은 액세스하지 않습니다. 핵심 서비스의 확장으로 처리해야 합니다. DLP 또는 맬웨어 방지 또는 콘텐츠 검사와 같이 프록시가 할 수 있는 모든 작업을 서비스에서 이미 사용할 수 있으며 대규모로 사용할 수 있으며 TLS로 암호화된 연결을 크랙하지 않고도 사용할 수 있습니다. 그러나 실제로 제어할 수 없는 트래픽을 프록시로 프록시하려는 경우 의 지침과 트래픽 범주에 [https://aka.ms/pnc](../enterprise/microsoft-365-network-connectivity-principles.md) [https://aka.ms/ipaddrs](../enterprise/urls-and-ip-address-ranges.md) 주의하세요. 이러한 트래픽에는 세 가지 범주의 트래픽이 Office 365. 최적화 및 허용은 실제로 직접 이동하여 프록시를 무시해야 합니다. 기본값은 프로시전할 수 있습니다. 자세한 내용은 다음을 참조합니다. 읽기.

프록시 사용을 고민하는 대부분의 고객은 실제로 수행하고 있는 작업을 볼 때 클라이언트가 프록시에 HTTP CONNECT 요청을 할 때 프록시는 이제 비용이 많이 드는 추가 라우터에 불과하다는 것을 알고 있습니다. MAPI 및 RTC와 같은 사용중인 프로토콜은 웹 프로시저가 이해하는 프로토콜도 아니기 때문에 TLS 크래킹이 있는 경우에도 추가 보안이 강화되지 않습니다. 추가 *대기* 시간이 발생하고 있습니다. 자세한 내용은 트래픽에 대한 최적화, 허용 및 기본 [https://aka.ms/pnc](../enterprise/microsoft-365-network-connectivity-principles.md) 범주를 Microsoft 365 참조합니다.

마지막으로, 프록시에 대한 전반적인 영향과 해당 영향을 처리하기 위해 해당 대응을 고려합니다. 프록시를 통해 연결이 더 많이 설정되고 있으므로 너무 많은 트래픽을 버퍼링하지 않을 수 있도록 TCP 배율을 낮출 수 있습니다. 프로시전이 너무 과부하하여 배율 계수 0을 사용 중이던 고객을 본 적이 있습니다. 배율 계수는 지수 값으로, 8을 사용하겠지만 배율 계수 값이 감소할 때마다 이 값이 성능에 큰 영향을 미치게 됩니다.

TLS 검사는 SECURITY! 그렇지만 실제로는 그렇지 않습니다. 많은 고객이 이를 사용하여 모든 트래픽을 조사하기를 원하며, 이는 TLS "중단 및 조사"를 의미하는 것입니다. HTTPS(개인 정보 보호 문제)를 통해 액세스되는 웹 사이트에 대해 프록시가 10개 또는 20개의 동시 스트림에서 수백밀리초 동안 이 작업을 해야 할 수 있습니다. 큰 다운로드가 있는 경우나 비디오가 관련이 있는 경우 이러한 연결 중 하나 이상이 훨씬 더 오래 지속될 수 있지만 전체적으로 이러한 연결은 대부분 매우 빠르게 설정, 전송 및 닫습니다. 중단 및 조사를 수행하면 프록시가 작업의 두 배를 수행해야 합니다. 클라이언트에서 프록시로의 각 연결에 대해 프록시는 끝점에 대한 별도의 연결을 다시 설정해야 합니다. 따라서 1이 2가 2가 4가 1이 됩니다. 32는 64가 됩니다.를 참조하세요. 일반적인 웹 검색의 경우 프록시 솔루션의 크기를 정해 두면 됩니다. 그러나 클라이언트 연결에 대해 동일한 작업을 Office 365 경우 수명이 긴 동시 연결 수가 크기에 비해 큰 순서가 될 수 있습니다.

### <a name="streaming-isnt-important-except-that-it-is"></a>스트리밍은 중요하지 않습니다. 

UDP를 사용하는 Office 365 서비스는 Skype(곧 사용 중지될 예정)에 따라 Microsoft Teams. Teams, 비디오 및 프레젠테이션 공유를 비롯한 스트리밍 트래픽에 UDP를 사용하게 됩니다. 스트리밍 트래픽은 음성, 비디오 및 데크를 발표하거나 데모를 수행하는 온라인 모임과 같은 라이브 트래픽입니다. 패킷이 삭제되거나 순서가 떨어질 경우 실제로는 사용자가 UDP를 사용하며 스트림은 계속 진행할 수 있기 때문에 UDP를 사용하게 됩니다.

클라이언트에서 서비스로의 아웃바운드 UDP 트래픽을 허용하지 않는 경우 TCP를 사용할 수 있습니다. 그러나 TCP 패킷이 삭제되면  RTO(다시 전송 시간 제한)가 만료되고 누락된 패킷을 다시 전송할 수 있을 때까지 모든 것이 중지됩니다. 패킷이 순서대로 도착하면 다른 패킷이 도착할 때까지 모든 것이 중지되어 순서대로 다시 재구성할 수 있습니다. 두 경우 모두 오디오에서 인식할 수 있는 글리치(최대 헤드룸 기억) 및 비디오(클릭한 것... 이로 인해 성능이 아지며 사용자 환경이 나쁘게 됩니다. 그리고 위의 Proxies에 대해 떠올리면 어떻게 하나요? 클라이언트에서 Teams 프록시를 강제로 사용하는 경우 강제로 TCP를 사용하게 됩니다. 따라서 이제 성능에 부정적인 영향을 두 번 발생하게 됩니다.

### <a name="split-tunneling-may-seem-scary"></a>분할 터널링이 까다로워 보일 수 있습니다.

그렇지만 그렇지 않습니다. 모든 연결에서 Office 365 TLS를 통해 설정됩니다. 지금까지 지금까지 TLS 1.2를 제공해오고 있으며, 레거시 클라이언트가 계속 사용하며 이는 위험하기 때문에 곧 이전 버전을 사용하지 못하게 됩니다.

TLS 연결 또는 이 중 32개가 VPN을 통해 이동한 다음 서비스로 이동해도 보안이 강화되지 않습니다. 대기 시간을 추가하고 전반적인 처리 처리를 줄입니다. 일부 VPN 솔루션에서는 UDP가 TCP를 통해 터널링하게 하여 스트리밍 트래픽에 다시 부정적인 영향을 미치게 됩니다. 또한 TLS 검사를 수행하지 않는 한, 모든 단점은 거치지 않습니다. 대부분의 인력이 원격이기 때문에 고객들 사이에서 매우 일반적인 테마는 모든 사용자가 VPN을 사용하여 연결하게 하여 대역폭 및 성능에 많은 영향을 미치고 있습니다. 범주 및 끝점 최적화에 대한 액세스에 대한 분할 터널링을 구성하는 [Office 365 있습니다.](../enterprise/microsoft-365-network-connectivity-principles.md#new-office-365-endpoint-categories)

분할 터널링을 쉽게 수정하고 해결해야 합니다. 자세한 내용은 VPN 분할 터널링을 Office 365 원격 사용자에 대한 연결 [최적화를 검토해야 합니다.](../enterprise/microsoft-365-vpn-split-tunnel.md)

## <a name="the-sins-of-the-past"></a>과거의 죄

잘못된 선택의 이유는 (1) 서비스가 작동하는 방법을 모르는 경우, (2) 클라우드를 채택하기 전에 작성된 회사 정책을 준수하려고 시도하는 경우, (3) 목표를 달성할 수 있는 방법이 두 개 이상 없다고 쉽게 확신할 수 없는 보안 팀의 조합으로 인해 선택됩니다. 위와 아래의 링크가 첫 번째에 도움이 될 것입니다. 두 번째를 지난 후원하려면 임원진 후원이 요구될 수 있습니다. 방법 대신 보안 정책의 목표를 해결하면 세 번째 문제를 해결할 수 있습니다. 콘텐츠 중재에 대한 조건부 액세스에서 정보 보호에 대한 DLP, 끝점 유효성 검사, 제로 데이 위협에 대한 끝점 유효성 검사 - 모든 최종 목표는 Office 365에서 사용할 수 있는 것을 통해 달성할 수 있으며, 모든 최종 목표는 프레미스 네트워크 기어, 강제 VPN 터널 및 TLS 중단 및 조사에 종속되지 않고도 수행할 수 있습니다.

다른 경우 조직이 클라우드로 이동하기 전에 크기 조정 및 구매한 하드웨어는 단순히 새로운 트래픽 패턴 및 부하를 처리하기 위해 확장할 수 없습니다. 모든 트래픽을 단일 시작 지점을 통해 라우팅하고 프록시해야 하는 경우 그에 따라 네트워크 장비 및 대역폭을 업그레이드할 준비를 합니다. 더 많은 사용자가 온보드할 때 환경이 느리게 느리게 저하되지 않는 것이 처럼 두 가지 모두에서 사용률을 주의 깊게 모니터링합니다. 팁 포인트에 도달할 때까지 모든 것이 괜찮습니다. 그러면 모든 사람이 겪습니다.

## <a name="exceptions-to-the-rules"></a>규칙에 대한 예외

조직에 테넌트 제한이 필요한 경우, TLS 중단이 있는 프록시를 사용하여 프록시를 통해 일부 트래픽을 강제로 검사해야 하지만, 이를 통해 모든 트래픽을 강제할 필요는 없습니다. [](/azure/active-directory/manage-apps/tenant-restrictions)  이는 모든 또는 아무것도 프로시전되지 않습니다. 따라서 프록시에서 수정해야 할 일에 주의를 기울여야 합니다.

분할 터널링을 허용하지만 일반 웹 트래픽에 프록시도 사용하려면 PAC 파일이 직접 이동해야 하는 작업과 VPN 터널을 통과하는 트래픽에 대한 흥미로운 트래픽을 정의하는 방법을 정의하는지 확인하세요. 이를 더 쉽게 관리할 수 있도록 샘플 PAC 파일을 [https://aka.ms/ipaddrs](../enterprise/urls-and-ip-address-ranges.md) 제공합니다.

## <a name="conclusion"></a>결론

거의 모든 Fortune 500을 포함하여 수만 개의 조직은 일상적으로 중요한 Office 365 기능을 활용합니다. 이렇게 하여 인터넷을 통해 안전하게 보호합니다.

어떤 보안 목표가 사용되어도 VPN 연결, 프록시 서버, TLS 중단 및 조사 또는 중앙 집중식 인터넷을 통해 사용자의 트래픽을 네트워크에서 벗어날 수 있도록 하는 방법을 통해 네트워크가 회사 본사인지에 상관없이 최상의 성능을 제공합니다.  원격 사무실 또는 사용자가 집에서 작업하는 경우 당사의 지침은 Office 365 서비스를 구축하는 방법과 안전하고 수행적인 사용자 환경을 보장하기 위한 것입니다.

## <a name="further-reading"></a>추가 읽기

[네트워크 Office 365 원칙](../enterprise/microsoft-365-network-connectivity-principles.md)

[Office 365 URL 및 IP 주소 범위](../enterprise/urls-and-ip-address-ranges.md)

[Office 365 끝점 관리](../enterprise/managing-office-365-endpoints.md)

[Office 365 IP 주소 및 URL 웹 서비스](../enterprise/microsoft-365-ip-web-service.md)

[Office 365 네트워크 연결 평가](../enterprise/assessing-network-connectivity.md) 

[Office 365 네트워크 및 성능 조정](../enterprise/network-planning-and-performance.md)

[Office 365 네트워크 연결 평가](../enterprise/assessing-network-connectivity.md) 

[초기 계획 및 성능 기록을 사용하여 Office 365 성능 조정](../enterprise/performance-tuning-using-baselines-and-history.md)

[Office 365 성능 문제 해결 계획](../enterprise/performance-troubleshooting-plan.md)

[콘텐츠 배달 네트워크](../enterprise/content-delivery-networks.md)

[Microsoft 365 연결 테스트](https://connectivity.office.com/)

[Microsoft가 빠르고 안정적인 글로벌 네트워크를 구축하는 방법](https://azure.microsoft.com/blog/how-microsoft-builds-its-fast-and-reliable-global-network/)

[Office 365 네트워킹 블로그](https://techcommunity.microsoft.com/t5/office-365-networking/bd-p/Office365Networking)

[Office 365 VPN 분할 터널링을 사용하는 원격 사용자를 위한 연결 관리](../enterprise/microsoft-365-vpn-split-tunnel.md)
